<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>User panel</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-dark bg-dark">
    <div class="container-fluid">
        <span class="navbar-text text-white">
            <strong th:text="${user.email}">user@mail.ru</strong>
            with roles:
            <span th:text="${user.roles}">USER</span>
        </span>
        <a href="/logout" class="btn btn-outline-light btn-sm">Logout</a>
    </div>
</nav>

<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        <div class="col-2 bg-light vh-100 p-0">
            <ul class="nav flex-column nav-pills p-2">
                <li class="nav-item">
                    <a class="nav-link active" href="/user">User</a>
                </li>
                <li class="nav-item d-none" id="adminLinkItem">
                    <a class="nav-link" href="/admin">Admin</a>
                </li>
            </ul>
        </div>

        <!-- Main Content -->
        <div class="col-10 mt-3">
            <h2>User panel</h2>
            <ul class="nav nav-tabs mb-3">
                <li class="nav-item">
                    <span class="nav-link active">User information</span>
                </li>
            </ul>

            <div>
                <h4>About user</h4>
                <table class="table table-striped w-75">
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>Username</th>
                        <th>Role</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td th:text="${user.id}">3</td>
                        <td th:text="${user.username}">Username</td>
                        <td th:text="${user.roles}">Role</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Получаем информацию о ролях из элемента
        const authoritiesElement = document.querySelector('.navbar-text span');
        if (authoritiesElement && authoritiesElement.textContent.includes('ADMIN')) {
            document.getElementById('adminLinkItem').classList.remove('d-none');
        }
    });
</script>
</body>
</html>